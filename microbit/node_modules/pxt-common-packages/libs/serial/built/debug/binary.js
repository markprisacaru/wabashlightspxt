'use strict';
pxsim.noRefCounting();
pxsim.setTitle("serial");
pxsim.setConfigData({}, {});
pxsim.pxtrt.mapKeyNames = [
 "",
 "buf",
 "decoder",
 "serialDevice",
 "writeLine",
 "writeString"
];
__this.setupPerfCounters([]);


var _main___P1 = entryPoint = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = globals.zeroFx8___67;
    r0 = 0;
    globals.zeroFx8___67 = (r0);
    r0 = globals.oneFx8___68;
    r0 = 1;
    globals.oneFx8___68 = (r0);
    r0 = globals.twoFx8___69;
    r0 = 2;
    globals.twoFx8___69 = (r0);
    r0 = globals._pollEventQueue___141;
    r0 = undefined;
    globals._pollEventQueue___141 = (r0);
    r0 = globals._intervals___146;
    r0 = undefined;
    globals._intervals___146 = (r0);
    r0 = "\r\n";
    s.tmp_0 = r0;
    r0 = globals.NEW_LINE___261;
    r0 = s.tmp_0;
    globals.NEW_LINE___261 = (r0);
    r0 = globals.i___291;
    r0 = 0;
    globals.i___291 = (r0);
    s.tmp_0 = { fn: forever__P154, parent: s };
    r0 = inline__P292;
    s.tmp_0.arg0 = r0;
    s.pc = 2;
    return actionCall(s.tmp_0)
  case 2:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
_main___P1.info = {"start":0,"length":0,"line":0,"column":0,"endLine":0,"endColumn":0,"fileName":"test.ts","functionName":"<main>"}
_main___P1.continuations = [  ]



var inline__P292  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = globals.i___291;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + 1);
    s.tmp_1 = r0;
    r0 = globals.i___291;
    r0 = s.tmp_1;
    globals.i___291 = (r0);
    s.tmp_2 = { fn: writeLine__P276, parent: s };
    r0 = pxsim.numops.toString(s.tmp_1);
    s.tmp_2.arg0 = r0;
    s.pc = 2;
    return actionCall(s.tmp_2)
  case 2:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
inline__P292.info = {"start":19,"length":54,"line":1,"column":8,"endLine":3,"endColumn":1,"fileName":"test.ts","functionName":"inline"}



var writeLine__P276  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.d___295 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = { fn: device__P271, parent: s };
    s.pc = 4;
    return actionCall(s.tmp_0)
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = s.d___295;
    r0 = s.tmp_1;
    s.d___295 = (r0);
    r0 = s.d___295;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = { fn: Serial_writeLine__P267, parent: s };
    r0 = s.d___295;
    s.tmp_1.arg0 = r0;
    r0 = s.arg0;
    s.tmp_1.arg1 = r0;
    s.pc = 5;
    return actionCall(s.tmp_1)
  case 5:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
  case 2:
    r0 = s.d___295;
    return leave(s, r0)
  default: oops()
} } }
writeLine__P276.info = {"start":4146,"length":115,"line":135,"column":4,"endLine":138,"endColumn":5,"fileName":"serial.ts","functionName":"writeLine"}



var Serial_constructor__P268  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 16, 16)) failedCast(r0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = s.arg1;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["serialDevice"] = (s.tmp_1);
    r0 = pxsim.pxtcore.mkClassInstance(UTF8Decoder__C164_VT);
    s.tmp_0 = r0;
    s.tmp_1 = { fn: UTF8Decoder_constructor__P168, parent: s };
    r0 = s.tmp_0;
    s.tmp_1.arg0 = r0;
    s.pc = 3;
    return actionCall(s.tmp_1)
  case 3:
    r0 = s.retval;
    r0 = s.arg0;
    s.tmp_2 = r0;
    r0 = (s.tmp_2).fields["decoder"] = (s.tmp_0);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
Serial_constructor__P268.info = {"start":393,"length":143,"line":12,"column":8,"endLine":15,"endColumn":9,"fileName":"serial.ts","functionName":"inline"}



var UTF8Decoder_constructor__P168  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 17, 17)) failedCast(r0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["buf"] = (undefined);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
UTF8Decoder_constructor__P168.info = {"start":10484,"length":51,"line":364,"column":4,"endLine":366,"endColumn":5,"fileName":"pxt_modules/base/control.ts","functionName":"inline"}



var Serial_writeLine__P267  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 16, 16)) failedCast(r0);
    s.tmp_0 = { fn: Serial_writeString__P266, parent: s };
    r0 = s.arg0;
    s.tmp_0.arg0 = r0;
    r0 = s.arg1;
    s.tmp_0.arg1 = r0;
    s.pc = 2;
    return actionCall(s.tmp_0)
  case 2:
    r0 = s.retval;
    s.tmp_0 = { fn: Serial_writeString__P266, parent: s };
    r0 = s.arg0;
    s.tmp_0.arg0 = r0;
    r0 = globals.NEW_LINE___261;
    s.tmp_0.arg1 = r0;
    s.pc = 3;
    return actionCall(s.tmp_0)
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
Serial_writeLine__P267.info = {"start":1563,"length":118,"line":48,"column":8,"endLine":51,"endColumn":9,"fileName":"serial.ts","functionName":"writeLine"}



var Serial_writeString__P266  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.buf___303 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 16, 16)) failedCast(r0);
    r0 = s.arg1;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    s.tmp_1 = r0;
    r0 = pxsim.Boolean_.bang(s.tmp_1);
    s.tmp_2 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_2);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
  case 2:
    r0 = s.arg1;
    s.tmp_3 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_3);
    s.tmp_4 = r0;
    r0 = s.buf___303;
    r0 = s.tmp_4;
    s.buf___303 = (r0);
    r0 = s.arg0;
    r0 = r0.fields["serialDevice"];
    s.tmp_0 = r0;
    r0 = s.buf___303;
    s.tmp_1 = r0;
    r0 = pxsim.SerialDeviceMethods.writeBuffer(s.tmp_0, s.tmp_1);
  case 3:
    r0 = s.buf___303;
    return leave(s, r0)
  default: oops()
} } }
Serial_writeString__P266.info = {"start":1377,"length":176,"line":42,"column":8,"endLine":46,"endColumn":9,"fileName":"serial.ts","functionName":"writeString"}



var device__P271  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.tx___305 = undefined;
    s.rx___306 = undefined;
    r0 = globals._device___270;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    s.tmp_1 = r0;
    r0 = pxsim.Boolean_.bang(s.tmp_1);
    s.tmp_2 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
    r0 = pxsim.pins.pinByCfg(28);
    s.tmp_3 = r0;
    r0 = s.tx___305;
    r0 = s.tmp_3;
    s.tx___305 = (r0);
    r0 = pxsim.pins.pinByCfg(21);
    s.tmp_0 = r0;
    r0 = s.rx___306;
    r0 = s.tmp_0;
    s.rx___306 = (r0);
    r0 = s.tx___305;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    s.tmp_1 = r0;
    r0 = pxsim.Boolean_.bang(s.tmp_1);
    s.tmp_2 = r0;
    r0 = pxsim.numops.toBool(s.tmp_2);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_2;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.langsupp.ignore(s.tmp_2);
    r0 = s.rx___306;
    s.tmp_3 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_3);
    s.tmp_4 = r0;
    r0 = pxsim.Boolean_.bang(s.tmp_4);
    { step = 2; continue; }
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_5);
    if (!r0) { step = 3; continue; }
    r0 = undefined;
    { step = 7; continue; }
    { step = 4; continue; }
  case 3:
  case 4:
    s.tmp_6 = { fn: createSerial__P269, parent: s };
    r0 = s.tx___305;
    s.tmp_6.arg0 = r0;
    r0 = s.rx___306;
    s.tmp_6.arg1 = r0;
    r0 = 12;
    s.tmp_6.arg2 = r0;
    s.pc = 9;
    return actionCall(s.tmp_6)
  case 9:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = globals._device___270;
    r0 = s.tmp_7;
    globals._device___270 = (r0);
    { step = 6; continue; }
  case 5:
  case 6:
    r0 = globals._device___270;
    { step = 7; continue; }
  case 7:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tx___305;
    r0 = s.rx___306;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
device__P271.info = {"start":2088,"length":325,"line":68,"column":4,"endLine":76,"endColumn":5,"fileName":"serial.ts","functionName":"device"}



var createSerial__P269  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.dev___310 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg2;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.langsupp.ignore(s.tmp_0);
    r0 = 0;
    { step = 2; continue; }
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.arg0;
    s.tmp_2 = r0;
    r0 = s.arg1;
    s.tmp_3 = r0;
    r0 = pxsim.serial.internalCreateSerialDevice(s.tmp_2, s.tmp_3, s.tmp_1);
    s.tmp_4 = r0;
    r0 = s.dev___310;
    r0 = s.tmp_4;
    s.dev___310 = (r0);
    r0 = pxsim.pxtcore.mkClassInstance(Serial__C262_VT);
    s.tmp_0 = r0;
    s.tmp_1 = { fn: Serial_constructor__P268, parent: s };
    r0 = s.tmp_0;
    s.tmp_1.arg0 = r0;
    r0 = s.dev___310;
    s.tmp_1.arg1 = r0;
    s.pc = 5;
    return actionCall(s.tmp_1)
  case 5:
    r0 = s.retval;
    r0 = s.tmp_0;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.dev___310;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
createSerial__P269.info = {"start":1854,"length":203,"line":62,"column":4,"endLine":65,"endColumn":5,"fileName":"serial.ts","functionName":"createSerial"}



var forever__P154  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = pxsim.loops.forever(s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
forever__P154.info = {"start":8397,"length":63,"line":274,"column":0,"endLine":276,"endColumn":1,"fileName":"pxt_modules/base/control.ts","functionName":"forever"}

var Serial__C262_VT = {
  name: "Serial",
  numFields: 2,
  classNo: 16,
  methods: [
  ],
  iface: {
    "serialDevice": 13,
    "set/serialDevice": 13,
    "decoder": 13,
    "set/decoder": 13,
    "writeString": Serial_writeString__P266,
    "writeLine": Serial_writeLine__P267,
  },
};
var UTF8Decoder__C164_VT = {
  name: "UTF8Decoder",
  numFields: 1,
  classNo: 17,
  methods: [
  ],
  iface: {
    "buf": 13,
    "set/buf": 13,
  },
};

setupDebugger(1)
