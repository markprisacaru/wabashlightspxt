'use strict';
pxsim.noRefCounting();
pxsim.setTitle("jacdac-drivers");
pxsim.setConfigData({}, {});
pxsim.pxtrt.mapKeyNames = [
 "",
 "NAME",
 "SIZE",
 "_controlData",
 "_proxy",
 "address",
 "broadcastEvent",
 "buf",
 "controlData",
 "deltaTimeMillis",
 "device",
 "deviceClass",
 "driverClass",
 "driverType",
 "flags",
 "frameCallbacks",
 "frameWorker",
 "framesInSample",
 "getNumber",
 "handleControlPacket",
 "handlePacket",
 "handler",
 "handlers",
 "isConnected",
 "lastStats",
 "log",
 "name",
 "onStats",
 "prevTimeMillis",
 "raiseEvent",
 "register",
 "registerHandler",
 "sendPacket",
 "serialNumber",
 "src",
 "start",
 "suppressForwarding",
 "supressLog",
 "timeInSample",
 "toString",
 "updateControlPacket",
 "value"
];
__this.setupPerfCounters([]);


var _main___P1 = entryPoint = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = globals.zeroFx8___67;
    r0 = 0;
    globals.zeroFx8___67 = (r0);
    r0 = globals.oneFx8___68;
    r0 = 1;
    globals.oneFx8___68 = (r0);
    r0 = globals.twoFx8___69;
    r0 = 2;
    globals.twoFx8___69 = (r0);
    r0 = globals._pollEventQueue___141;
    r0 = undefined;
    globals._pollEventQueue___141 = (r0);
    r0 = globals._intervals___146;
    r0 = undefined;
    globals._intervals___146 = (r0);
    r0 = globals.minPriority___169;
    r0 = 1;
    globals.minPriority___169 = (r0);
    r0 = pxsim.Array_.mk();
    s.tmp_0 = r0;
    r0 = pxsim.Array_.push(s.tmp_0, inline__P626);
    r0 = globals.listeners___170;
    r0 = s.tmp_0;
    globals.listeners___170 = (r0);
    r0 = globals.consolePriority___283;
    r0 = 0;
    globals.consolePriority___283 = (r0);
    r0 = "bus";
    s.tmp_0 = r0;
    r0 = globals.MessageBusService_NAME___400;
    r0 = s.tmp_0;
    globals.MessageBusService_NAME___400 = (r0);
    r0 = pxsim.pxtcore.mkClassInstance(MessageBusService__C395_VT);
    s.tmp_0 = r0;
    s.tmp_1 = { fn: MessageBusService_constructor__P401, parent: s };
    r0 = s.tmp_0;
    s.tmp_1.arg0 = r0;
    s.pc = 2;
    return actionCall(s.tmp_1)
  case 2:
    r0 = s.retval;
    r0 = globals.messageBusService___402;
    r0 = s.tmp_0;
    globals.messageBusService___402 = (r0);
    s.tmp_0 = { fn: broadcastEvent__P403, parent: s };
    r0 = 9008;
    s.tmp_0.arg0 = r0;
    r0 = 3;
    s.tmp_0.arg1 = r0;
    s.pc = 3;
    return actionCall(s.tmp_0)
  case 3:
    r0 = s.retval;
    s.tmp_0 = { fn: onEvent__P195, parent: s };
    r0 = 9008;
    s.tmp_0.arg0 = r0;
    r0 = 3;
    s.tmp_0.arg1 = r0;
    r0 = inline__P619;
    s.tmp_0.arg2 = r0;
    r0 = 16;
    s.tmp_0.arg3 = r0;
    s.pc = 4;
    return actionCall(s.tmp_0)
  case 4:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
_main___P1.info = {"start":0,"length":0,"line":0,"column":0,"endLine":0,"endColumn":0,"fileName":"test.ts","functionName":"<main>"}
_main___P1.continuations = [  ]



var inline__P619  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.tmp_0 = { fn: log__P175, parent: s };
    r0 = "click";
    s.tmp_0.arg0 = r0;
    s.pc = 2;
    return actionCall(s.tmp_0)
  case 2:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
inline__P619.info = {"start":109,"length":40,"line":1,"column":51,"endLine":3,"endColumn":1,"fileName":"test.ts","functionName":"inline"}



var log__P175  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = { fn: add__P171, parent: s };
    r0 = 1;
    s.tmp_0.arg0 = r0;
    r0 = s.arg0;
    s.tmp_0.arg1 = r0;
    s.pc = 2;
    return actionCall(s.tmp_0)
  case 2:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
log__P175.info = {"start":1439,"length":87,"line":57,"column":4,"endLine":59,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"log"}



var add__P171  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.i___623 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = globals.minPriority___169;
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    s.tmp_2 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_2);
    if (!r0) { step = 1; continue; }
    { step = 6; continue; }
    { step = 2; continue; }
  case 1:
  case 2:
    r0 = s.arg1;
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 7);
    pxsim.String_.stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim.String_.concat(s.tmp_4, "\n");
    s.tmp_5 = r0;
    r0 = s.arg1;
    r0 = s.tmp_5;
    s.arg1 = (r0);
    r0 = s.i___623;
    r0 = 0;
    s.i___623 = (r0);
  case 3:
    r0 = s.i___623;
    s.tmp_0 = r0;
    r0 = globals.listeners___170;
    s.tmp_1 = r0;
    r0 = pxsim.Array_.length(s.tmp_1);
    s.tmp_2 = r0;
    r0 = (s.tmp_0 < s.tmp_2);
    s.tmp_3 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
    s.tmp_4 = { fn: add__P171, parent: s };
    r0 = globals.listeners___170;
    s.tmp_5 = r0;
    r0 = s.i___623;
    s.tmp_6 = r0;
    r0 = pxsim.Array_.getAt(s.tmp_5, s.tmp_6);
    s.tmp_4.argL = r0;
    r0 = s.arg0;
    s.tmp_4.arg0 = r0;
    r0 = s.arg1;
    s.tmp_4.arg1 = r0;
    s.pc = 8;
    setupLambda(s.tmp_4, s.tmp_4.argL);
    return actionCall(s.tmp_4)
  case 8:
    r0 = s.retval;
    r0 = s.i___623;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + 1);
    s.tmp_1 = r0;
    r0 = s.i___623;
    r0 = s.tmp_1;
    s.i___623 = (r0);
    { step = 3; continue; }
  case 5:
  case 6:
    r0 = s.i___623;
    return leave(s, r0)
  default: oops()
} } }
add__P171.info = {"start":632,"length":280,"line":28,"column":4,"endLine":35,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"add"}



var inline__P626  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = s.arg1;
    s.tmp_1 = r0;
    r0 = pxsim.control.__log(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
inline__P626.info = {"start":534,"length":85,"line":25,"column":8,"endLine":25,"endColumn":93,"fileName":"pxt_modules/base/console.ts","functionName":"inline"}



var onEvent__P195  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.ctx___633 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = { fn: eventContext__P214, parent: s };
    s.pc = 4;
    return actionCall(s.tmp_0)
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = s.ctx___633;
    r0 = s.tmp_1;
    s.ctx___633 = (r0);
    r0 = s.ctx___633;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    s.tmp_1 = r0;
    r0 = pxsim.Boolean_.bang(s.tmp_1);
    s.tmp_2 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_2);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    s.tmp_3 = r0;
    r0 = s.arg1;
    s.tmp_4 = r0;
    r0 = s.arg2;
    s.tmp_5 = r0;
    r0 = s.arg3;
    s.tmp_6 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_3, s.tmp_4, s.tmp_5, s.tmp_6);
    { step = 2; continue; }
  case 1:
    s.tmp_0 = { fn: EventContext_registerHandler__P209, parent: s };
    r0 = s.ctx___633;
    s.tmp_0.arg0 = r0;
    r0 = s.arg0;
    s.tmp_0.arg1 = r0;
    r0 = s.arg1;
    s.tmp_0.arg2 = r0;
    r0 = s.arg2;
    s.tmp_0.arg3 = r0;
    r0 = s.arg3;
    s.tmp_0.arg4 = r0;
    s.pc = 5;
    return actionCall(s.tmp_0)
  case 5:
    r0 = s.retval;
  case 2:
    r0 = s.ctx___633;
    return leave(s, r0)
  default: oops()
} } }
onEvent__P195.info = {"start":336,"length":325,"line":9,"column":4,"endLine":15,"endColumn":5,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"onEvent"}



var EventContext_constructor__P212  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 16, 16)) failedCast(r0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = pxsim.Array_.mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["handlers"] = (s.tmp_1);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["framesInSample"] = (0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["timeInSample"] = (0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["deltaTimeMillis"] = (0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["frameWorker"] = (0);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
EventContext_constructor__P212.info = {"start":1801,"length":201,"line":61,"column":8,"endLine":67,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline"}



var EventContext_registerHandler__P209  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.h___640 = undefined;
    s.unnamed6___U1 = undefined;
    s.unnamed7___U2 = undefined;
    s.hn___642 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 16, 16)) failedCast(r0);
    r0 = s.h___640;
    r0 = undefined;
    s.h___640 = (r0);
    r0 = s.h___640;
    r0 = undefined;
    s.h___640 = (r0);
    r0 = s.arg0;
    r0 = r0.fields["handlers"];
    s.tmp_0 = r0;
    r0 = s.unnamed6___U1;
    r0 = s.tmp_0;
    s.unnamed6___U1 = (r0);
    r0 = s.unnamed7___U2;
    r0 = 0;
    s.unnamed7___U2 = (r0);
  case 1:
    r0 = s.unnamed7___U2;
    s.tmp_0 = r0;
    r0 = pxsim.Array_.length(s.unnamed6___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 7; continue; }
    r0 = s.unnamed6___U1;
    s.tmp_2 = r0;
    r0 = pxsim.pxtcore.toInt(s.unnamed7___U2);
    s.tmp_3 = r0;
    r0 = pxsim.Array_.getAt(s.tmp_2, s.tmp_3);
    s.tmp_4 = r0;
    r0 = s.h___640;
    r0 = s.tmp_4;
    s.h___640 = (r0);
    r0 = s.h___640;
    r0 = r0.fields["src"];
    s.tmp_5 = r0;
    r0 = s.arg1;
    s.tmp_6 = r0;
    r0 = (s.tmp_5 == s.tmp_6);
    s.tmp_7 = r0;
    r0 = pxsim.numops.toBool(s.tmp_7);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_7;
    { step = 3; continue; }
  case 2:
    r0 = pxsim.langsupp.ignore(s.tmp_7);
    r0 = s.h___640;
    r0 = r0.fields["value"];
    s.tmp_8 = r0;
    r0 = s.arg2;
    s.tmp_9 = r0;
    r0 = (s.tmp_8 == s.tmp_9);
    { step = 3; continue; }
  case 3:
    // jmp value (already in r0)
    s.tmp_10 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_10);
    if (!r0) { step = 4; continue; }
    r0 = s.h___640;
    s.tmp_11 = r0;
    r0 = s.arg4;
    s.tmp_12 = r0;
    r0 = (s.tmp_11).fields["flags"] = (s.tmp_12);
    r0 = s.h___640;
    s.tmp_0 = r0;
    r0 = s.arg3;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["handler"] = (s.tmp_1);
    { step = 8; continue; }
    { step = 5; continue; }
  case 4:
  case 5:
    r0 = s.unnamed7___U2;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + 1);
    s.tmp_1 = r0;
    r0 = s.unnamed7___U2;
    r0 = s.tmp_1;
    s.unnamed7___U2 = (r0);
    { step = 1; continue; }
  case 7:
    r0 = s.unnamed6___U1;
    r0 = undefined;
    s.unnamed6___U1 = (r0);
    r0 = pxsim.pxtcore.mkClassInstance(EventHandler__C197_VT);
    s.tmp_2 = r0;
    s.tmp_3 = { fn: EventHandler_constructor__P200, parent: s };
    r0 = s.tmp_2;
    s.tmp_3.arg0 = r0;
    r0 = s.arg1;
    s.tmp_3.arg1 = r0;
    r0 = s.arg2;
    s.tmp_3.arg2 = r0;
    r0 = s.arg3;
    s.tmp_3.arg3 = r0;
    r0 = s.arg4;
    s.tmp_3.arg4 = r0;
    s.pc = 9;
    return actionCall(s.tmp_3)
  case 9:
    r0 = s.retval;
    r0 = s.hn___642;
    r0 = s.tmp_2;
    s.hn___642 = (r0);
    r0 = s.arg0;
    r0 = r0.fields["handlers"];
    s.tmp_0 = r0;
    r0 = s.hn___642;
    s.tmp_1 = r0;
    r0 = pxsim.Array_.push(s.tmp_0, s.tmp_1);
    s.tmp_0 = { fn: EventHandler_register__P198, parent: s };
    r0 = s.hn___642;
    s.tmp_0.arg0 = r0;
    s.pc = 10;
    return actionCall(s.tmp_0)
  case 10:
    r0 = s.retval;
  case 8:
    r0 = s.h___640;
    r0 = s.unnamed6___U1;
    r0 = s.unnamed7___U2;
    r0 = s.hn___642;
    return leave(s, r0)
  default: oops()
} } }
EventContext_registerHandler__P209.info = {"start":4741,"length":525,"line":148,"column":8,"endLine":161,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"registerHandler"}



var EventHandler_register__P198  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 17, 17)) failedCast(r0);
    r0 = pxsim.pxtcore.mkAction(1, inline__P645);
    s.tmp_0 = r0;
    r0 = s.arg0;
    s.tmp_1 = r0;
    r0 = pxsim.pxtrt.stclo(s.tmp_0, 0, s.tmp_1);
    r0 = s.arg0;
    r0 = r0.fields["src"];
    s.tmp_2 = r0;
    r0 = s.arg0;
    r0 = r0.fields["value"];
    s.tmp_3 = r0;
    r0 = s.arg0;
    r0 = r0.fields["flags"];
    s.tmp_4 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_2, s.tmp_3, s.tmp_0, s.tmp_4);
    return leave(s, r0)
  default: oops()
} } }
EventHandler_register__P198.info = {"start":1069,"length":165,"line":34,"column":8,"endLine":38,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"register"}



var inline__P645  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = s.caps[0];
    r0 = r0.fields["handler"];
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = { fn: inline__P645, parent: s };
    r0 = s.caps[0];
    r0 = r0.fields["handler"];
    s.tmp_1.argL = r0;
    s.pc = 4;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    return actionCall(s.tmp_1)
  case 4:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
  case 2:
    return leave(s, r0)
  default: oops()
} } }
inline__P645.info = {"start":1140,"length":71,"line":35,"column":58,"endLine":37,"endColumn":13,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline"}



var EventHandler_constructor__P200  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 17, 17)) failedCast(r0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = s.arg1;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["src"] = (s.tmp_1);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = s.arg2;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["value"] = (s.tmp_1);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = s.arg3;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["handler"] = (s.tmp_1);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
EventHandler_constructor__P200.info = {"start":876,"length":183,"line":28,"column":8,"endLine":32,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline"}



var eventContext__P214  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = globals.eventContexts___213;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = globals.eventContexts___213;
    s.tmp_1 = r0;
    r0 = globals.eventContexts___213;
    s.tmp_2 = r0;
    r0 = pxsim.Array_.length(s.tmp_2);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 - 1);
    s.tmp_4 = r0;
    r0 = pxsim.Array_.getAt(s.tmp_1, s.tmp_4);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
    { step = 2; continue; }
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
eventContext__P214.info = {"start":5379,"length":136,"line":169,"column":4,"endLine":171,"endColumn":5,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"eventContext"}



var broadcastEvent__P403  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = { fn: MessageBusService_broadcastEvent__P397, parent: s };
    r0 = globals.messageBusService___402;
    s.tmp_0.arg0 = r0;
    r0 = s.arg0;
    s.tmp_0.arg1 = r0;
    r0 = s.arg1;
    s.tmp_0.arg2 = r0;
    s.pc = 2;
    return actionCall(s.tmp_0)
  case 2:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
broadcastEvent__P403.info = {"start":1930,"length":120,"line":56,"column":4,"endLine":58,"endColumn":5,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"broadcastEvent"}



var MessageBusService_constructor__P401  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 20, 20)) failedCast(r0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["NAME"] = ("bus");
    s.tmp_1 = { fn: Broadcast_constructor__P305, parent: s };
    r0 = s.arg0;
    s.tmp_1.arg0 = r0;
    r0 = globals.MessageBusService_NAME___400;
    s.tmp_1.arg1 = r0;
    r0 = 2;
    s.tmp_1.arg2 = r0;
    r0 = undefined;
    s.tmp_1.arg3 = r0;
    s.pc = 3;
    return actionCall(s.tmp_1)
  case 3:
    r0 = s.retval;
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["suppressForwarding"] = (false);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
MessageBusService_constructor__P401.info = {"start":218,"length":146,"line":9,"column":8,"endLine":12,"endColumn":9,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"inline"}



var Broadcast_constructor__P305  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 19, 20)) failedCast(r0);
    s.tmp_0 = { fn: Driver_constructor__P303, parent: s };
    r0 = s.arg0;
    s.tmp_0.arg0 = r0;
    r0 = s.arg1;
    s.tmp_0.arg1 = r0;
    r0 = 40960;
    s.tmp_0.arg2 = r0;
    r0 = s.arg2;
    s.tmp_0.arg3 = r0;
    r0 = s.arg3;
    s.tmp_0.arg4 = r0;
    s.pc = 3;
    return actionCall(s.tmp_0)
  case 3:
    r0 = s.retval;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
Broadcast_constructor__P305.info = {"start":5102,"length":171,"line":138,"column":8,"endLine":140,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"inline"}



var Driver_constructor__P303  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 18, 20)) failedCast(r0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = s.arg1;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["name"] = (s.tmp_1);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = s.arg2;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["driverType"] = (s.tmp_1);
    r0 = s.arg3;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.langsupp.ignore(s.tmp_0);
    s.tmp_1 = { fn: programHash__P145, parent: s };
    s.pc = 5;
    return actionCall(s.tmp_1)
  case 5:
    r0 = s.retval;
    { step = 2; continue; }
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.arg0;
    s.tmp_3 = r0;
    r0 = (s.tmp_3).fields["deviceClass"] = (s.tmp_2);
    r0 = s.arg0;
    s.tmp_0 = r0;
    s.tmp_1 = { fn: max__P50, parent: s };
    r0 = 0;
    s.tmp_1.arg0 = r0;
    r0 = s.arg4;
    s.tmp_1.arg1 = r0;
    s.pc = 6;
    return actionCall(s.tmp_1)
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_2);
    s.tmp_3 = r0;
    r0 = (s.tmp_0).fields["_controlData"] = (s.tmp_3);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["supressLog"] = (false);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["_proxy"] = (undefined);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
Driver_constructor__P303.info = {"start":1399,"length":413,"line":21,"column":8,"endLine":28,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"inline"}



var max__P50  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = s.arg1;
    s.tmp_1 = r0;
    r0 = (s.tmp_0 >= s.tmp_1);
    s.tmp_2 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_2);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
  case 2:
    r0 = s.arg1;
    { step = 3; continue; }
  case 3:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
max__P50.info = {"start":9502,"length":105,"line":323,"column":4,"endLine":326,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"max"}



var programHash__P145  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = 0;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
programHash__P145.info = {"start":5504,"length":50,"line":182,"column":4,"endLine":182,"endColumn":54,"fileName":"pxt_modules/base/control.ts","functionName":"programHash"}



var MessageBusService_broadcastEvent__P397  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 20, 20)) failedCast(r0);
    s.tmp_0 = { fn: Driver_start__P301, parent: s };
    r0 = s.arg0;
    s.tmp_0.arg0 = r0;
    s.pc = 2;
    return actionCall(s.tmp_0)
  case 2:
    r0 = s.retval;
    r0 = pxsim.pxtcore.mkAction(3, inline__P669);
    s.tmp_0 = r0;
    r0 = s.arg0;
    s.tmp_1 = r0;
    r0 = pxsim.pxtrt.stclo(s.tmp_0, 0, s.tmp_1);
    r0 = s.arg1;
    s.tmp_2 = r0;
    r0 = pxsim.pxtrt.stclo(s.tmp_0, 1, s.tmp_2);
    r0 = s.arg2;
    s.tmp_3 = r0;
    r0 = pxsim.pxtrt.stclo(s.tmp_0, 2, s.tmp_3);
    s.tmp_4 = { fn: onEvent__P195, parent: s };
    r0 = s.arg1;
    s.tmp_4.arg0 = r0;
    r0 = s.arg2;
    s.tmp_4.arg1 = r0;
    r0 = s.tmp_0;
    s.tmp_4.arg2 = r0;
    r0 = 192;
    s.tmp_4.arg3 = r0;
    s.pc = 3;
    return actionCall(s.tmp_4)
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
MessageBusService_broadcastEvent__P397.info = {"start":667,"length":353,"line":22,"column":8,"endLine":29,"endColumn":9,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"broadcastEvent"}



var inline__P669  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = s.caps[0];
    r0 = r0.fields["suppressForwarding"];
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
  case 2:
    s.tmp_1 = { fn: MessageBusService_raiseEvent__P396, parent: s };
    r0 = s.caps[0];
    s.tmp_1.arg0 = r0;
    r0 = s.caps[1];
    s.tmp_1.arg1 = r0;
    r0 = s.caps[2];
    s.tmp_1.arg2 = r0;
    s.pc = 4;
    return actionCall(s.tmp_1)
  case 4:
    r0 = s.retval;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
inline__P669.info = {"start":855,"length":118,"line":25,"column":39,"endLine":28,"endColumn":13,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"inline"}



var MessageBusService_raiseEvent__P396  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.event___673 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 20, 20)) failedCast(r0);
    s.tmp_0 = { fn: Driver_start__P301, parent: s };
    r0 = s.arg0;
    s.tmp_0.arg0 = r0;
    s.pc = 2;
    return actionCall(s.tmp_0)
  case 2:
    r0 = s.retval;
    r0 = pxsim.control.createBuffer(4);
    s.tmp_0 = r0;
    r0 = s.event___673;
    r0 = s.tmp_0;
    s.event___673 = (r0);
    r0 = s.event___673;
    s.tmp_0 = r0;
    r0 = s.arg1;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 4, 0, s.tmp_1);
    r0 = s.event___673;
    s.tmp_0 = r0;
    r0 = s.arg2;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 4, 2, s.tmp_1);
    s.tmp_0 = { fn: Driver_sendPacket__P300, parent: s };
    r0 = s.arg0;
    s.tmp_0.arg0 = r0;
    r0 = s.event___673;
    s.tmp_0.arg1 = r0;
    s.pc = 3;
    return actionCall(s.tmp_0)
  case 3:
    r0 = s.retval;
    r0 = s.event___673;
    return leave(s, r0)
  default: oops()
} } }
MessageBusService_raiseEvent__P396.info = {"start":374,"length":283,"line":14,"column":8,"endLine":20,"endColumn":9,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"raiseEvent"}



var Driver_sendPacket__P300  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 18, 20)) failedCast(r0);
    s.tmp_0 = { fn: Driver_start__P301, parent: s };
    r0 = s.arg0;
    s.tmp_0.arg0 = r0;
    s.pc = 2;
    return actionCall(s.tmp_0)
  case 2:
    r0 = s.retval;
    s.tmp_0 = { fn: sendPacket__P285, parent: s };
    r0 = s.arg1;
    s.tmp_0.arg0 = r0;
    s.tmp_1 = { fn: JDDevice_address__P331, parent: s };
    s.tmp_2 = { fn: Driver_device__P295, parent: s };
    r0 = s.arg0;
    s.tmp_2.arg0 = r0;
    s.pc = 5;
    return actionCall(s.tmp_2)
  case 5:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.pc = 4;
    return actionCall(s.tmp_1)
  case 4:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.pc = 3;
    return actionCall(s.tmp_0)
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
Driver_sendPacket__P300.info = {"start":3910,"length":128,"line":103,"column":8,"endLine":106,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"sendPacket"}



var Driver_device__P295  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 18, 20)) failedCast(r0);
    r0 = s.arg0;
    r0 = r0.fields["_proxy"];
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.pxtcore.mkClassInstance(JDDevice__C329_VT);
    s.tmp_1 = r0;
    s.tmp_2 = { fn: JDDevice_constructor__P353, parent: s };
    r0 = s.tmp_1;
    s.tmp_2.arg0 = r0;
    r0 = s.arg0;
    r0 = r0.fields["_proxy"];
    s.tmp_3 = r0;
    r0 = pxsim.JacDacDriverStatusMethods.device(s.tmp_3);
    s.tmp_2.arg1 = r0;
    s.pc = 5;
    return actionCall(s.tmp_2)
  case 5:
    r0 = s.retval;
    r0 = s.tmp_1;
    { step = 2; continue; }
  case 1:
    r0 = undefined;
    { step = 2; continue; }
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
Driver_device__P295.info = {"start":2565,"length":137,"line":62,"column":8,"endLine":64,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"device"}



var JDDevice_constructor__P353  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 21, 21)) failedCast(r0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["SIZE"] = (12);
    r0 = s.arg0;
    s.tmp_1 = r0;
    r0 = s.arg1;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["buf"] = (s.tmp_2);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
JDDevice_constructor__P353.info = {"start":2498,"length":64,"line":74,"column":8,"endLine":76,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline"}



var JDDevice_toString__P351  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.buf___682 = undefined;
    s.toHex___683 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 21, 21)) failedCast(r0);
    r0 = pxsim.control.createBuffer(4);
    s.tmp_0 = r0;
    r0 = s.buf___682;
    r0 = s.tmp_0;
    s.buf___682 = (r0);
    r0 = pxsim.pxtcore.mkAction(1, toHex__P683);
    s.tmp_0 = r0;
    r0 = s.buf___682;
    s.tmp_1 = r0;
    r0 = pxsim.pxtrt.stclo(s.tmp_0, 0, s.tmp_1);
    r0 = s.tmp_0;
    s.toHex___683 = (r0);
    s.tmp_2 = { fn: JDDevice_isConnected__P341, parent: s };
    r0 = s.arg0;
    s.tmp_2.arg0 = r0;
    s.pc = 5;
    return actionCall(s.tmp_2)
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_3);
    if (!r0) { step = 1; continue; }
    r0 = "v";
    { step = 2; continue; }
  case 1:
    r0 = "x";
    { step = 2; continue; }
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim.String_.mkEmpty();
    s.tmp_5 = r0;
    s.tmp_6 = { fn: JDDevice_toString__P351, parent: s };
    r0 = s.toHex___683;
    s.tmp_6.argL = r0;
    s.tmp_7 = { fn: JDDevice_address__P331, parent: s };
    r0 = s.arg0;
    s.tmp_7.arg0 = r0;
    s.pc = 7;
    return actionCall(s.tmp_7)
  case 7:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    r0 = 2;
    s.tmp_6.arg1 = r0;
    s.pc = 6;
    setupLambda(s.tmp_6, s.tmp_6.argL);
    return actionCall(s.tmp_6)
  case 6:
    r0 = s.retval;
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 8);
    pxsim.String_.stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim.String_.concat(s.tmp_5, s.tmp_9);
    s.tmp_10 = r0;
    r0 = pxsim.String_.concat(s.tmp_10, " ");
    s.tmp_11 = r0;
    s.tmp_12 = { fn: JDDevice_toString__P351, parent: s };
    r0 = s.toHex___683;
    s.tmp_12.argL = r0;
    s.tmp_13 = { fn: JDDevice_driverClass__P338, parent: s };
    r0 = s.arg0;
    s.tmp_13.arg0 = r0;
    s.pc = 10;
    return actionCall(s.tmp_13)
  case 10:
    r0 = s.retval;
    s.tmp_12.arg0 = r0;
    r0 = 4;
    s.tmp_12.arg1 = r0;
    s.pc = 9;
    setupLambda(s.tmp_12, s.tmp_12.argL);
    return actionCall(s.tmp_12)
  case 9:
    r0 = s.retval;
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 11);
    pxsim.String_.stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_15 = r0;
    r0 = pxsim.String_.concat(s.tmp_11, s.tmp_15);
    s.tmp_16 = r0;
    r0 = pxsim.String_.concat(s.tmp_16, " ");
    s.tmp_17 = r0;
    s.tmp_18 = { fn: JDDevice_toString__P351, parent: s };
    r0 = s.toHex___683;
    s.tmp_18.argL = r0;
    s.tmp_19 = { fn: JDDevice_serialNumber__P335, parent: s };
    r0 = s.arg0;
    s.tmp_19.arg0 = r0;
    s.pc = 13;
    return actionCall(s.tmp_19)
  case 13:
    r0 = s.retval;
    s.tmp_18.arg0 = r0;
    r0 = 11;
    s.tmp_18.arg1 = r0;
    s.pc = 12;
    setupLambda(s.tmp_18, s.tmp_18.argL);
    return actionCall(s.tmp_18)
  case 12:
    r0 = s.retval;
    s.tmp_20 = r0;
    if ((s.tmp_20) && (s.tmp_20).vtable) {
    setupResume(s, 14);
    pxsim.String_.stringConv(s.tmp_20);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_20) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_21 = r0;
    r0 = pxsim.String_.concat(s.tmp_17, s.tmp_21);
    s.tmp_22 = r0;
    r0 = pxsim.String_.concat(s.tmp_22, " ");
    s.tmp_23 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 15);
    pxsim.String_.stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_24 = r0;
    r0 = pxsim.String_.concat(s.tmp_23, s.tmp_24);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.buf___682;
    r0 = s.toHex___683;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
JDDevice_toString__P351.info = {"start":7884,"length":490,"line":222,"column":8,"endLine":230,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"toString"}



var toHex__P683  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.caps[0];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.fill(s.tmp_0, 0, 0, -1);
    r0 = s.caps[0];
    s.tmp_0 = r0;
    r0 = s.arg0;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 0, s.tmp_1);
    r0 = s.caps[0];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_0);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
toHex__P683.info = {"start":7966,"length":196,"line":224,"column":12,"endLine":228,"endColumn":13,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"toHex"}



var JDDevice_isConnected__P341  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 21, 21)) failedCast(r0);
    s.tmp_0 = { fn: JDDevice_flags__P333, parent: s };
    r0 = s.arg0;
    s.tmp_0.arg0 = r0;
    s.pc = 3;
    return actionCall(s.tmp_0)
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 128);
    s.tmp_2 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_2);
    s.tmp_3 = r0;
    r0 = pxsim.Boolean_.bang(s.tmp_3);
    s.tmp_4 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_4);
    s.tmp_5 = r0;
    r0 = pxsim.Boolean_.bang(s.tmp_5);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
JDDevice_isConnected__P341.info = {"start":4552,"length":103,"line":129,"column":8,"endLine":131,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isConnected"}



var JDDevice_flags__P333  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 21, 21)) failedCast(r0);
    r0 = s.arg0;
    r0 = r0.fields["buf"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 2);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
JDDevice_flags__P333.info = {"start":3324,"length":96,"line":94,"column":8,"endLine":96,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"flags"}



var JDDevice_serialNumber__P335  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 21, 21)) failedCast(r0);
    r0 = s.arg0;
    r0 = r0.fields["buf"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 11, 4);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
JDDevice_serialNumber__P335.info = {"start":3539,"length":103,"line":100,"column":8,"endLine":102,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serialNumber"}



var JDDevice_driverClass__P338  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 21, 21)) failedCast(r0);
    r0 = s.arg0;
    r0 = r0.fields["buf"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 11, 8);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
JDDevice_driverClass__P338.info = {"start":4092,"length":102,"line":114,"column":8,"endLine":116,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"driverClass"}



var JDDevice_address__P331  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 21, 21)) failedCast(r0);
    r0 = s.arg0;
    r0 = r0.fields["buf"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 2, 0);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
JDDevice_address__P331.info = {"start":3105,"length":97,"line":88,"column":8,"endLine":90,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"address"}



var sendPacket__P285  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = s.arg1;
    s.tmp_1 = r0;
    r0 = pxsim.jacdac.__internalSendPacket(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
sendPacket__P285.info = {"start":2150,"length":192,"line":78,"column":4,"endLine":81,"endColumn":5,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"sendPacket"}



var Driver_start__P301  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 18, 20)) failedCast(r0);
    r0 = s.arg0;
    r0 = r0.fields["_proxy"];
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
    { step = 2; continue; }
  case 1:
  case 2:
    s.tmp_1 = { fn: Driver_log__P296, parent: s };
    r0 = s.arg0;
    s.tmp_1.arg0 = r0;
    r0 = "start";
    s.tmp_1.arg1 = r0;
    s.pc = 6;
    return actionCall(s.tmp_1)
  case 6:
    r0 = s.retval;
    r0 = pxsim.pxtcore.mkAction(1, inline__P697);
    s.tmp_0 = r0;
    r0 = s.arg0;
    s.tmp_1 = r0;
    r0 = pxsim.pxtrt.stclo(s.tmp_0, 0, s.tmp_1);
    r0 = pxsim.Array_.mk();
    s.tmp_2 = r0;
    r0 = pxsim.Array_.push(s.tmp_2, s.tmp_0);
    r0 = pxsim.pxtcore.mkAction(1, inline__P699);
    s.tmp_3 = r0;
    r0 = s.arg0;
    s.tmp_4 = r0;
    r0 = pxsim.pxtrt.stclo(s.tmp_3, 0, s.tmp_4);
    r0 = pxsim.Array_.push(s.tmp_2, s.tmp_3);
    r0 = s.arg0;
    s.tmp_5 = r0;
    r0 = s.arg0;
    r0 = r0.fields["driverType"];
    s.tmp_6 = r0;
    r0 = s.arg0;
    r0 = r0.fields["deviceClass"];
    s.tmp_7 = r0;
    s.tmp_8 = { fn: Driver_controlData__P292, parent: s };
    r0 = s.arg0;
    s.tmp_8.arg0 = r0;
    s.pc = 7;
    return actionCall(s.tmp_8)
  case 7:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim.jacdac.__internalAddDriver(s.tmp_6, s.tmp_7, s.tmp_2, s.tmp_9);
    s.tmp_10 = r0;
    r0 = (s.tmp_5).fields["_proxy"] = (s.tmp_10);
    r0 = s.arg0;
    r0 = r0.fields["_controlData"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_0);
    s.tmp_1 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = pxsim.pxtcore.mkAction(1, inline__P703);
    s.tmp_2 = r0;
    r0 = s.arg0;
    s.tmp_3 = r0;
    r0 = pxsim.pxtrt.stclo(s.tmp_2, 0, s.tmp_3);
    s.tmp_4 = { fn: onEvent__P195, parent: s };
    r0 = s.arg0;
    r0 = r0.fields["_proxy"];
    s.tmp_5 = r0;
    r0 = pxsim.JacDacDriverStatusMethods.id(s.tmp_5);
    s.tmp_4.arg0 = r0;
    r0 = 2001;
    s.tmp_4.arg1 = r0;
    r0 = s.tmp_2;
    s.tmp_4.arg2 = r0;
    r0 = 16;
    s.tmp_4.arg3 = r0;
    s.pc = 8;
    return actionCall(s.tmp_4)
  case 8:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
  case 4:
  case 5:
    return leave(s, r0)
  default: oops()
} } }
Driver_start__P301.info = {"start":4202,"length":518,"line":113,"column":8,"endLine":124,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"start"}



var inline__P697  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = { fn: inline__P697, parent: s };
    r0 = s.caps[0];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0;
    s.tmp_0.arg1 = r0;
    s.pc = 3;
    pxsim.check(typeof s.tmp_0.arg0  != "number", "Can't access property of null/undefined.")
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods[0];
    return actionCall(s.tmp_0)
  case 3:
    r0 = s.retval;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
inline__P697.info = {"start":4405,"length":35,"line":118,"column":17,"endLine":118,"endColumn":52,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"inline"}



var inline__P699  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = { fn: inline__P699, parent: s };
    r0 = s.caps[0];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0;
    s.tmp_0.arg1 = r0;
    s.pc = 3;
    pxsim.check(typeof s.tmp_0.arg0  != "number", "Can't access property of null/undefined.")
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods[1];
    return actionCall(s.tmp_0)
  case 3:
    r0 = s.retval;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
inline__P699.info = {"start":4458,"length":42,"line":119,"column":16,"endLine":119,"endColumn":58,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"inline"}



var inline__P703  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.tmp_0 = { fn: Driver_updateControlPacket__P291, parent: s };
    r0 = s.caps[0];
    s.tmp_0.arg0 = r0;
    s.pc = 2;
    return actionCall(s.tmp_0)
  case 2:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
inline__P703.info = {"start":4676,"length":32,"line":123,"column":83,"endLine":123,"endColumn":115,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"inline"}



var Driver_updateControlPacket__P291  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 18, 20)) failedCast(r0);
    return leave(s, r0)
  default: oops()
} } }
Driver_updateControlPacket__P291.info = {"start":2240,"length":43,"line":47,"column":8,"endLine":48,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"updateControlPacket"}



var Driver_controlData__P292  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 18, 20)) failedCast(r0);
    r0 = s.arg0;
    r0 = r0.fields["_controlData"];
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
Driver_controlData__P292.info = {"start":2293,"length":75,"line":50,"column":8,"endLine":52,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"controlData"}



var MessageBusService_handleControlPacket__P399  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 20, 20)) failedCast(r0);
    r0 = true;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
MessageBusService_handleControlPacket__P399.info = {"start":1491,"length":151,"line":42,"column":8,"endLine":45,"endColumn":9,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"handleControlPacket"}



var Driver_handleControlPacket__P299  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 18, 20)) failedCast(r0);
    r0 = false;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
Driver_handleControlPacket__P299.info = {"start":3814,"length":86,"line":99,"column":8,"endLine":101,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"handleControlPacket"}



var MessageBusService_handlePacket__P398  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.packet___712 = undefined;
    s.id___713 = undefined;
    s.value___714 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 20, 20)) failedCast(r0);
    r0 = pxsim.pxtcore.mkClassInstance(JDPacket__C312_VT);
    s.tmp_0 = r0;
    s.tmp_1 = { fn: JDPacket_constructor__P319, parent: s };
    r0 = s.tmp_0;
    s.tmp_1.arg0 = r0;
    r0 = s.arg1;
    s.tmp_1.arg1 = r0;
    s.pc = 3;
    return actionCall(s.tmp_1)
  case 3:
    r0 = s.retval;
    r0 = s.packet___712;
    r0 = s.tmp_0;
    s.packet___712 = (r0);
    s.tmp_0 = { fn: JDPacket_getNumber__P317, parent: s };
    r0 = s.packet___712;
    s.tmp_0.arg0 = r0;
    r0 = 4;
    s.tmp_0.arg1 = r0;
    r0 = 0;
    s.tmp_0.arg2 = r0;
    s.pc = 4;
    return actionCall(s.tmp_0)
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = s.id___713;
    r0 = s.tmp_1;
    s.id___713 = (r0);
    s.tmp_0 = { fn: JDPacket_getNumber__P317, parent: s };
    r0 = s.packet___712;
    s.tmp_0.arg0 = r0;
    r0 = 4;
    s.tmp_0.arg1 = r0;
    r0 = 2;
    s.tmp_0.arg2 = r0;
    s.pc = 5;
    return actionCall(s.tmp_0)
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = s.value___714;
    r0 = s.tmp_1;
    s.value___714 = (r0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["suppressForwarding"] = (true);
    r0 = s.id___713;
    s.tmp_0 = r0;
    r0 = s.value___714;
    s.tmp_1 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, s.tmp_1);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["suppressForwarding"] = (false);
    r0 = true;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.packet___712;
    r0 = s.id___713;
    r0 = s.value___714;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
MessageBusService_handlePacket__P398.info = {"start":1030,"length":451,"line":31,"column":8,"endLine":40,"endColumn":9,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"handlePacket"}



var JDPacket_getNumber__P317  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 22, 22)) failedCast(r0);
    r0 = s.arg0;
    r0 = r0.fields["buf"];
    s.tmp_0 = r0;
    r0 = s.arg1;
    s.tmp_1 = r0;
    r0 = s.arg2;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 4);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, s.tmp_1, s.tmp_3);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
JDPacket_getNumber__P317.info = {"start":539,"length":118,"line":19,"column":8,"endLine":21,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"getNumber"}



var JDPacket_constructor__P319  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 22, 22)) failedCast(r0);
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = s.arg1;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["buf"] = (s.tmp_1);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
JDPacket_constructor__P319.info = {"start":76,"length":64,"line":3,"column":8,"endLine":5,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline"}



var Driver_handlePacket__P298  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 18, 20)) failedCast(r0);
    r0 = false;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
Driver_handlePacket__P298.info = {"start":3607,"length":78,"line":91,"column":8,"endLine":93,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"handlePacket"}



var Driver_log__P296  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.dev___724 = undefined;
    s.d___725 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 18, 20)) failedCast(r0);
    r0 = s.arg0;
    r0 = r0.fields["supressLog"];
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    s.tmp_1 = r0;
    r0 = pxsim.Boolean_.bang(s.tmp_1);
    s.tmp_2 = r0;
    r0 = pxsim.numops.toBool(s.tmp_2);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_2;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.langsupp.ignore(s.tmp_2);
    r0 = globals.consolePriority___283;
    s.tmp_3 = r0;
    r0 = globals.minPriority___169;
    s.tmp_4 = r0;
    r0 = (s.tmp_3 < s.tmp_4);
    { step = 2; continue; }
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_5);
    if (!r0) { step = 7; continue; }
    s.tmp_6 = { fn: deviceName__P428, parent: s };
    s.pc = 10;
    return actionCall(s.tmp_6)
  case 10:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = s.dev___724;
    r0 = s.tmp_7;
    s.dev___724 = (r0);
    r0 = s.dev___724;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    s.tmp_1 = r0;
    r0 = pxsim.Boolean_.bang(s.tmp_1);
    s.tmp_2 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
    s.tmp_3 = { fn: Driver_device__P295, parent: s };
    r0 = s.arg0;
    s.tmp_3.arg0 = r0;
    s.pc = 11;
    return actionCall(s.tmp_3)
  case 11:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = s.d___725;
    r0 = s.tmp_4;
    s.d___725 = (r0);
    r0 = s.d___725;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = { fn: toHex8__P410, parent: s };
    s.tmp_2 = { fn: JDDevice_address__P331, parent: s };
    r0 = s.d___725;
    s.tmp_2.arg0 = r0;
    s.pc = 13;
    return actionCall(s.tmp_2)
  case 13:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.pc = 12;
    return actionCall(s.tmp_1)
  case 12:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    r0 = "--";
    { step = 4; continue; }
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.dev___724;
    r0 = s.tmp_3;
    s.dev___724 = (r0);
    { step = 6; continue; }
  case 5:
  case 6:
    s.tmp_0 = { fn: add__P171, parent: s };
    r0 = globals.consolePriority___283;
    s.tmp_0.arg0 = r0;
    r0 = pxsim.String_.mkEmpty();
    s.tmp_1 = r0;
    r0 = s.dev___724;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 15);
    pxsim.String_.stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim.String_.concat(s.tmp_1, s.tmp_3);
    s.tmp_4 = r0;
    r0 = pxsim.String_.concat(s.tmp_4, ">");
    s.tmp_5 = r0;
    r0 = s.arg0;
    r0 = r0.fields["name"];
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 16);
    pxsim.String_.stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim.String_.concat(s.tmp_5, s.tmp_7);
    s.tmp_8 = r0;
    r0 = pxsim.String_.concat(s.tmp_8, ">");
    s.tmp_9 = r0;
    r0 = s.arg1;
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 17);
    pxsim.String_.stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim.String_.concat(s.tmp_9, s.tmp_11);
    s.tmp_0.arg1 = r0;
    s.pc = 14;
    return actionCall(s.tmp_0)
  case 14:
    r0 = s.retval;
    { step = 8; continue; }
  case 7:
  case 8:
    r0 = s.dev___724;
    r0 = s.d___725;
    return leave(s, r0)
  default: oops()
} } }
Driver_log__P296.info = {"start":2712,"length":410,"line":66,"column":8,"endLine":75,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"log"}



var toHex8__P410  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.hexBuf___727 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.createBuffer(1);
    s.tmp_0 = r0;
    r0 = s.hexBuf___727;
    r0 = s.tmp_0;
    s.hexBuf___727 = (r0);
    r0 = s.hexBuf___727;
    s.tmp_0 = r0;
    r0 = s.arg0;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 2, 0, s.tmp_1);
    r0 = s.hexBuf___727;
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_0);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.hexBuf___727;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
toHex8__P410.info = {"start":539,"length":182,"line":20,"column":4,"endLine":24,"endColumn":5,"fileName":"pxt_modules/jacdac/console.ts","functionName":"toHex8"}



var deviceName__P428  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.tmp_0 = { fn: remoteDeviceName__P426, parent: s };
    r0 = 0;
    s.tmp_0.arg0 = r0;
    s.pc = 3;
    return actionCall(s.tmp_0)
  case 3:
    r0 = s.retval;
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
deviceName__P428.info = {"start":7576,"length":72,"line":221,"column":4,"endLine":223,"endColumn":5,"fileName":"pxt_modules/jacdac/console.ts","functionName":"deviceName"}



var remoteDeviceName__P426  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.entry___729 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = globals._deviceNames___424;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim.pxtcore.mkAction(1, inline__P731);
    s.tmp_1 = r0;
    r0 = s.arg0;
    s.tmp_2 = r0;
    r0 = pxsim.pxtrt.stclo(s.tmp_1, 0, s.tmp_2);
    s.tmp_3 = { fn: arrayFind__P40, parent: s };
    r0 = globals._deviceNames___424;
    s.tmp_3.arg0 = r0;
    r0 = s.tmp_1;
    s.tmp_3.arg1 = r0;
    s.pc = 7;
    return actionCall(s.tmp_3)
  case 7:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = s.entry___729;
    r0 = s.tmp_4;
    s.entry___729 = (r0);
    r0 = s.entry___729;
    s.tmp_0 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = { fn: remoteDeviceName__P426, parent: s };
    r0 = s.entry___729;
    s.tmp_1.arg0 = r0;
    s.pc = 8;
    if (s.tmp_1.arg0.vtable === 42) {
      s.retval = pxsim.pxtrt.mapGet(s.tmp_1.arg0, 26);
      s.tmp_1.fn = doNothing;
    } else {
    s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["name"];
    if (s.tmp_1.fn === 13) {
      s.retval = s.tmp_1.arg0.fields["name"];
      s.tmp_1.fn = doNothing;
    }
    }
    return actionCall(s.tmp_1)
  case 8:
    r0 = s.retval;
    { step = 5; continue; }
    { step = 2; continue; }
  case 1:
  case 2:
    { step = 4; continue; }
  case 3:
  case 4:
    r0 = pxsim.String_.mkEmpty();
    { step = 5; continue; }
  case 5:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.entry___729;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
remoteDeviceName__P426.info = {"start":6909,"length":257,"line":197,"column":4,"endLine":204,"endColumn":5,"fileName":"pxt_modules/jacdac/console.ts","functionName":"remoteDeviceName"}



var inline__P731  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = { fn: inline__P731, parent: s };
    r0 = s.arg0;
    s.tmp_0.arg0 = r0;
    s.pc = 3;
    if (s.tmp_0.arg0.vtable === 42) {
      s.retval = pxsim.pxtrt.mapGet(s.tmp_0.arg0, 33);
      s.tmp_0.fn = doNothing;
    } else {
    s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["serialNumber"];
    if (s.tmp_0.fn === 13) {
      s.retval = s.tmp_0.arg0.fields["serialNumber"];
      s.tmp_0.fn = doNothing;
    }
    }
    return actionCall(s.tmp_0)
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = s.caps[0];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
inline__P731.info = {"start":7036,"length":35,"line":199,"column":42,"endLine":199,"endColumn":77,"fileName":"pxt_modules/jacdac/console.ts","functionName":"inline"}



var JDDevice_serialNumber__P336  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, 21, 21)) failedCast(r0);
    r0 = s.arg0;
    r0 = r0.fields["buf"];
    s.tmp_0 = r0;
    r0 = s.arg1;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 4, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
JDDevice_serialNumber__P336.info = {"start":3651,"length":108,"line":103,"column":8,"endLine":105,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serialNumber"}



var arrayFind__P40  = function (s) {
var r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.len___739 = undefined;
    s.i___740 = undefined;
    s.v___742 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    s.tmp_0 = r0;
    r0 = pxsim.Array_.length(s.tmp_0);
    s.tmp_1 = r0;
    r0 = s.len___739;
    r0 = s.tmp_1;
    s.len___739 = (r0);
    r0 = s.i___740;
    r0 = 0;
    s.i___740 = (r0);
  case 1:
    r0 = s.i___740;
    s.tmp_0 = r0;
    r0 = s.len___739;
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    s.tmp_2 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
    r0 = s.arg0;
    s.tmp_3 = r0;
    r0 = s.i___740;
    s.tmp_4 = r0;
    r0 = pxsim.Array_.getAt(s.tmp_3, s.tmp_4);
    s.tmp_5 = r0;
    r0 = s.v___742;
    r0 = s.tmp_5;
    s.v___742 = (r0);
    s.tmp_0 = { fn: arrayFind__P40, parent: s };
    r0 = s.arg1;
    s.tmp_0.argL = r0;
    r0 = s.v___742;
    s.tmp_0.arg0 = r0;
    r0 = s.i___740;
    s.tmp_0.arg1 = r0;
    s.pc = 8;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    return actionCall(s.tmp_0)
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim.numops.toBoolDecr(s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = s.v___742;
    { step = 6; continue; }
    { step = 3; continue; }
  case 2:
  case 3:
    r0 = s.i___740;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_3 = r0;
    r0 = s.i___740;
    r0 = s.tmp_3;
    s.i___740 = (r0);
    { step = 1; continue; }
  case 5:
    r0 = undefined;
    { step = 6; continue; }
  case 6:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.len___739;
    r0 = s.i___740;
    r0 = s.v___742;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
arrayFind__P40.info = {"start":5028,"length":292,"line":165,"column":4,"endLine":172,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayFind"}

var EventContext__C202_VT = {
  name: "EventContext",
  numFields: 9,
  classNo: 16,
  methods: [
  ],
  iface: {
    "handlers": 13,
    "set/handlers": 13,
    "frameCallbacks": 13,
    "set/frameCallbacks": 13,
    "frameWorker": 13,
    "set/frameWorker": 13,
    "framesInSample": 13,
    "set/framesInSample": 13,
    "timeInSample": 13,
    "set/timeInSample": 13,
    "deltaTimeMillis": 13,
    "set/deltaTimeMillis": 13,
    "prevTimeMillis": 13,
    "set/prevTimeMillis": 13,
    "lastStats": 13,
    "set/lastStats": 13,
    "onStats": 13,
    "set/onStats": 13,
    "registerHandler": EventContext_registerHandler__P209,
  },
};
var EventHandler__C197_VT = {
  name: "EventHandler",
  numFields: 4,
  classNo: 17,
  methods: [
  ],
  iface: {
    "src": 13,
    "set/src": 13,
    "value": 13,
    "set/value": 13,
    "handler": 13,
    "set/handler": 13,
    "flags": 13,
    "set/flags": 13,
    "register": EventHandler_register__P198,
  },
};
var Driver__C287_VT = {
  name: "Driver",
  numFields: 6,
  classNo: 18,
  methods: [
    Driver_handlePacket__P298,
    Driver_handleControlPacket__P299,
  ],
  iface: {
    "name": 13,
    "set/name": 13,
    "_proxy": 13,
    "set/_proxy": 13,
    "driverType": 13,
    "set/driverType": 13,
    "deviceClass": 13,
    "set/deviceClass": 13,
    "supressLog": 13,
    "set/supressLog": 13,
    "_controlData": 13,
    "set/_controlData": 13,
    "updateControlPacket": Driver_updateControlPacket__P291,
    "controlData": Driver_controlData__P292,
    "device": Driver_device__P295,
    "log": Driver_log__P296,
    "handlePacket": Driver_handlePacket__P298,
    "handleControlPacket": Driver_handleControlPacket__P299,
    "sendPacket": Driver_sendPacket__P300,
    "start": Driver_start__P301,
  },
};
var Broadcast__C304_VT = {
  name: "Broadcast",
  numFields: 6,
  classNo: 19,
  methods: [
    Driver_handlePacket__P298,
    Driver_handleControlPacket__P299,
  ],
  iface: {
    "name": 13,
    "set/name": 13,
    "_proxy": 13,
    "set/_proxy": 13,
    "driverType": 13,
    "set/driverType": 13,
    "deviceClass": 13,
    "set/deviceClass": 13,
    "supressLog": 13,
    "set/supressLog": 13,
    "_controlData": 13,
    "set/_controlData": 13,
    "updateControlPacket": Driver_updateControlPacket__P291,
    "controlData": Driver_controlData__P292,
    "device": Driver_device__P295,
    "log": Driver_log__P296,
    "handlePacket": Driver_handlePacket__P298,
    "handleControlPacket": Driver_handleControlPacket__P299,
    "sendPacket": Driver_sendPacket__P300,
    "start": Driver_start__P301,
  },
};
var MessageBusService__C395_VT = {
  name: "MessageBusService",
  numFields: 8,
  classNo: 20,
  methods: [
    MessageBusService_handlePacket__P398,
    MessageBusService_handleControlPacket__P399,
  ],
  iface: {
    "name": 13,
    "set/name": 13,
    "_proxy": 13,
    "set/_proxy": 13,
    "driverType": 13,
    "set/driverType": 13,
    "deviceClass": 13,
    "set/deviceClass": 13,
    "supressLog": 13,
    "set/supressLog": 13,
    "_controlData": 13,
    "set/_controlData": 13,
    "suppressForwarding": 13,
    "set/suppressForwarding": 13,
    "NAME": 13,
    "set/NAME": 13,
    "raiseEvent": MessageBusService_raiseEvent__P396,
    "broadcastEvent": MessageBusService_broadcastEvent__P397,
    "handlePacket": MessageBusService_handlePacket__P398,
    "handleControlPacket": MessageBusService_handleControlPacket__P399,
    "updateControlPacket": Driver_updateControlPacket__P291,
    "controlData": Driver_controlData__P292,
    "device": Driver_device__P295,
    "log": Driver_log__P296,
    "sendPacket": Driver_sendPacket__P300,
    "start": Driver_start__P301,
  },
};
var JDDevice__C329_VT = {
  name: "JDDevice",
  numFields: 2,
  classNo: 21,
  methods: [
  ],
  iface: {
    "SIZE": 13,
    "set/SIZE": 13,
    "buf": 13,
    "set/buf": 13,
    "address": JDDevice_address__P331,
    "flags": JDDevice_flags__P333,
    "serialNumber": JDDevice_serialNumber__P335,
    "set/serialNumber": JDDevice_serialNumber__P336,
    "driverClass": JDDevice_driverClass__P338,
    "isConnected": JDDevice_isConnected__P341,
    "toString": JDDevice_toString__P351,
  },
  toStringMethod: JDDevice_toString__P351,
};
var JDPacket__C312_VT = {
  name: "JDPacket",
  numFields: 1,
  classNo: 22,
  methods: [
  ],
  iface: {
    "buf": 13,
    "set/buf": 13,
    "getNumber": JDPacket_getNumber__P317,
  },
};

setupDebugger(1)
